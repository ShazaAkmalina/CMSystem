!function(a){"use strict";a.fn.dialog=function(b){rs.plugins.dialog.options!==b&&(b=a.extend({},rs.plugins.dialog.options,b||{})),rs.registry.loggedIn===rs.registry.token&&"admin"===rs.registry.firstParameter?b.className=b.className.backend:b.className=b.className.frontend;var c={};c.open=function(){c.title.add(c.box).appendTo(c.container),b.message&&(c.textMessage=a("<p>"+b.message+"</p>").appendTo(c.box)),"prompt"===b.type&&(c.fieldPrompt=a('<input type="text" value="'+b.value+'" />').addClass(b.className.fieldPrompt).appendTo(c.box)),c.buttonOk.appendTo(c.box),"confirm"!==b.type&&"prompt"!==b.type||c.buttonCancel.appendTo(c.box),c.container.add(c.overlay).appendTo("body"),rs.flags.modal=!0},c.listen=function(){c.buttonOk.on("click",function(){if("function"==typeof b.callback)if("prompt"===b.type){var d=a.trim(c.fieldPrompt.val());d&&b.callback.call(this,d)}else b.callback.call(this)}).add(c.buttonCancel).add(c.overlay).on("click",function(){c.close()}),a(window).on("keydown",function(a){27===a.which&&c.close()})},c.close=function(){c.container.add(c.overlay).remove(),rs.flags.modal=!1},c.init=function(){c.overlay=a("<div>").addClass(b.className.dialogOverlay),c.container=a("<div>").addClass(b.className.dialog),c.title=a("<h3>"+rs.language[b.type]+"</h3>").addClass(b.className.dialogTitle),c.box=a("<div>").addClass(b.className.dialogBox),c.buttonOk=a("<a>"+rs.language.ok+"</a>").addClass(b.className.buttonOk),c.buttonCancel=a("<a>"+rs.language.cancel+"</a>").addClass(b.className.buttonCancel),rs.flags.modal||(c.open(),c.listen())},c.init()},a.fn.confirmLink=function(){return this.each(function(){a(this).on("click",function(b){var c=a(this),d=c.attr("href");"string"==typeof d&&(a.fn.dialog({type:"confirm",message:rs.language.dialog_question+rs.language.question_mark,callback:function(){"//"===d.substr(0,2)||"http://"===d.substr(0,7)||"https://"===d.substr(0,8)?window.location=d:window.location=rs.baseURL+d}}),b.preventDefault())})})},a.fn.preventUnload=function(b){return rs.plugins.preventUnload.options!==b&&(b=a.extend({},rs.plugins.preventUnload.options,b||{})),this.each(function(){"new"!==rs.registry.adminParameter&&"edit"!==rs.registry.adminParameter||a(this).one("change",function(){a("a").not(b.element.not).confirmLink()})})},a(function(){rs.plugins.confirmLink.init&&(a(rs.plugins.confirmLink.selector).confirmLink(),rs.plugins.preventUnload.init&&a(rs.plugins.preventUnload.selector).preventUnload(rs.plugins.preventUnload.options))})}(window.jQuery||window.Zepto),function(a){"use strict";a.fn.autoResize=function(b){return rs.plugins.autoResize.options!==b&&(b=a.extend({},rs.plugins.autoResize.options,b||{})),this.each(function(){a(this).on("focus input",function(){var a=this,c=a.value,d=c.split(b.eol).length;for(a.rows<d&&(a.rows=d);a.clientHeight===a.scrollHeight&&a.rows>1;)a.rows-=1;for(;a.clientHeight<a.scrollHeight&&a.rows<b.limit;)a.rows+=1}).css({overflow:b.overflow,resize:b.resize})})},a.fn.enableIndent=function(b){return rs.plugins.enableIndent.options!==b&&(b=a.extend({},rs.plugins.enableIndent.options,b||{})),this.each(function(){a(this).on("keydown",function(a){var c=this,d=c.value,e=c.selectionStart,f=c.selectionEnd,g=d.slice(e,f),h=d.slice(0,e),i=d.slice(f),j=b.eol,k=b.indent,l=0;"selectionStart"in c&&9===a.which&&(a.shiftKey?g.length?(c.value=h+g.replace(window.RegExp(j+k,"g"),function(){return l++,j}).replace(k,function(){return l++,!1})+i,c.selectionEnd=f-l*k.length,c.selectionStart=e):0===d.slice(e-k.length).indexOf(k)&&(c.value=d.slice(0,e-k.length)+d.slice(e),c.selectionStart=c.selectionEnd=e-k.length):g.length?(c.value=h+k+g.replace(window.RegExp(j,"g"),function(){return l++,j+k})+i,l++,c.selectionEnd=f+l*k.length,c.selectionStart=e):(c.value=h+k+g+i,c.selectionStart=c.selectionEnd=e+k.length),a.preventDefault())})})},a.fn.unmaskPassword=function(b){return rs.plugins.unmaskPassword.options!==b&&(b=a.extend({},rs.plugins.unmaskPassword.options,b||{})),this.each(function(){a(this).on("keydown blur",function(a){var c=this;a.ctrlKey&&a.altKey&&a.which===b.keyCode.unmask?c.type="text":c.type="password"})})},a.fn.validateForm=function(b){return rs.plugins.validateForm.options!==b&&(b=a.extend({},rs.plugins.validateForm.options,b||{})),this.each(function(){a(this).on("submit input related",function(c){var d=a(this),e=d.find(b.element.buttonSubmit),f=d.find(b.element.field),g=f,h=d.filter('[class^="rs-admin"]').length?"rs-admin-":"rs-";"related"===c.type?f=f.filter("[data-related]").removeAttr("data-related"):"input"===c.type&&(f=f.filter(":focus")),f.each(function(){var c=a(this),d=c[0],e=c.attr("contenteditable"),f=c.siblings("label"),g=h+"js-note-error "+h+"field-note "+h+"is-error",i="valid",j="",k="",l="";e?(j=c.html(),j||(i="invalid",l=rs.language.input_empty+rs.language.point)):rs.support.checkValidity?d.checkValidity()||(i="invalid",l=d.validationMessage):(j=c.val(),k=c.attr("required"),k&&!j&&(i="invalid",l=rs.language.input_empty+rs.language.point)),"invalid"===i?(c.addClass(g).trigger("invalid"),l&&b.message&&f.addClass(h+"label-message").attr("data-message",l)):(c.removeClass(g).trigger("valid"),b.message&&f.removeClass(h+"label-message").removeAttr("data-message"))}),g.hasClass(h+"js-note-error")?(d.trigger("error"),e.attr("disabled","disabled"),"submit"===c.type&&b.autoFocus&&g.filter("."+h+"js-note-error").first().focus(),"submit"===c.type&&rs.support.vibrate&&"number"==typeof b.vibrate&&window.navigator.vibrate(b.vibrate),c.preventDefault()):(d.trigger("success"),e.removeAttr("disabled"))}).attr("novalidate","novalidate")})},a.fn.validateSearch=function(b){return rs.plugins.validateSearch.options!==b&&(b=a.extend({},rs.plugins.validateSearch.options,b||{})),this.each(function(){a(this).on("submit",function(c){var d=a(this),e=d.find(b.element.field),f=e.val(),g=e.attr("placeholder"),h=rs.language.input_incorrect+rs.language.exclamation_mark,i="";g===h?(clearTimeout(i),c.preventDefault()):f.length<3&&(e.val(null).attr("placeholder",h),i=setTimeout(function(){e.attr("placeholder",g).focus()},b.duration),c.preventDefault())})})},a(function(){rs.plugins.autoResize.init&&a(rs.plugins.autoResize.selector).autoResize(rs.plugins.autoResize.options),rs.plugins.enableIndent.init&&a(rs.plugins.enableIndent.selector).enableIndent(),rs.plugins.unmaskPassword.init&&a(rs.plugins.unmaskPassword.selector).unmaskPassword(rs.plugins.unmaskPassword.options),rs.plugins.validateForm.init&&a(rs.plugins.validateForm.selector).validateForm(rs.plugins.validateForm.options),rs.plugins.validateSearch.init&&a(rs.plugins.validateSearch.selector).validateSearch(rs.plugins.validateSearch.options)})}(window.jQuery||window.Zepto),function(a){"use strict";a.fn.accordion=function(b){return rs.plugins.accordion.options!==b&&(b=a.extend({},rs.plugins.accordion.options,b||{})),this.each(function(){var c=a(this),d=c.find(b.element.accordionSet),e=c.find(b.element.accordionTitle),f=c.find(b.element.accordionBox),g=c.filter('[class^="rs-admin"]').length?"rs-admin-":"rs-";f.filter("."+g+"js-box-active").show(),e.on("click",function(){var c=a(this),h=c.closest(d),i=h.find(f);d.removeClass(g+"js-set-active "+g+"set-active").filter(h).addClass(g+"js-set-active "+g+"set-active"),e.removeClass(g+"js-title-active "+g+"title-active").filter(c).addClass(g+"js-title-active "+g+"title-active"),f.stop(1).not(i).slideUp(b.duration).removeClass(g+"js-box-active  "+g+"box-active"),i.slideDown(b.duration).addClass(g+"js-box-active  "+g+"box-active")}),c.on("error",function(){var a=d.has("."+g+"js-note-error").first(),b=a.find(e);b.click()})})},a.fn.tab=function(b){return rs.plugins.tab.options!==b&&(b=a.extend({},rs.plugins.tab.options,b||{})),this.each(function(){var c=a(this),d=c.find(b.element.tabItem),e=c.find(b.element.tabSet),f=c.filter('[class^="rs-admin"]').length?"rs-admin-":"rs-";e.filter("."+f+"js-set-active").show(),d.on("click",function(b){var c=a(this),g=c.children("a").attr("href").split("#")[1],h=e.filter("#"+g);d.removeClass(f+"js-item-active "+f+"item-active").filter(c).addClass(f+"js-item-active "+f+"item-active"),e.removeClass(f+"js-set-active "+f+"set-active").filter(h).addClass(f+"js-set-active "+f+"set-active"),b.preventDefault()}),c.on("error",function(){var a=e.has("."+f+"js-note-error").first().attr("id"),b=d.find('a[href*="'+a+'"]');b.click()})})},a(function(){rs.plugins.accordion.init&&a(rs.plugins.accordion.selector).accordion(rs.plugins.accordion.options),rs.plugins.tab.init&&a(rs.plugins.tab.selector).tab(rs.plugins.tab.options)})}(window.jQuery||window.Zepto),function(a){"use strict";a.fn.keyShortcut=function(b){return rs.plugins.keyShortcut.options!==b&&(b=a.extend({},rs.plugins.keyShortcut.options,b||{})),this.each(function(){a(this).on("keydown",function(c){var d=a(b.element.adminDock),e=a(b.element.adminPanel),f=a(b.element.buttonSubmit),g=a(b.element.buttonOk),h=a(b.element.buttonCancel);c.ctrlKey&&c.altKey&&(c.which===b.keyCode.cancel?h.click():c.which===b.keyCode.dock?d.toggle():c.which===b.keyCode.log?rs.registry.loggedIn===rs.registry.token?window.location=rs.baseURL+rs.registry.parameterRoute+rs.plugins.keyShortcut.routes.logout:window.location=rs.baseURL+rs.registry.parameterRoute+rs.plugins.keyShortcut.routes.login:c.which===b.keyCode.ok?g.click():c.which===b.keyCode.toggle?e.toggle():c.which===b.keyCode.submit&&f.click())})})},a(function(){rs.plugins.keyShortcut.init&&a(rs.plugins.keyShortcut.selector).keyShortcut(rs.plugins.keyShortcut.options)})}(window.jQuery||window.Zepto);